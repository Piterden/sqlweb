{"version":3,"file":"sqljs.js","sourceRoot":"","sources":["../code/license.ts","../code/error.ts","../code/query.ts","../code/insert.ts","../code/select.ts","../code/instance.ts","../code/model/Map.ts"],"names":[],"mappings":"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","sourcesContent":["/**\r\n * Project: SqlJs - https://github.com/ujjwalguptaofficial/sqljs\r\n * Author: Ujjwal Gupta \r\n * License: MIT\r\n */","namespace SqlJs {\r\n    export enum Errors {\r\n        JsStoreUndefined = \"Jstore_undefined\",\r\n        UndefinedCon = \"undefined_connection\",\r\n        Undefined = \"undefined\"\r\n    }\r\n\r\n    export interface IError {\r\n        _type: Errors;\r\n        _message: string;\r\n    }\r\n\r\n    export class Error implements IError {\r\n        _type: Errors;\r\n        _message: string;\r\n        _info: any;\r\n        constructor(type: Errors, info: any = null) {\r\n            this._type = type;\r\n            this._info = info;\r\n        }\r\n\r\n        public throw = function () {\r\n            throw this.get();\r\n        };\r\n\r\n        print = function (isWarn: boolean = false) {\r\n            var error_obj = this.get();\r\n            if (isWarn) {\r\n                console.warn(error_obj);\r\n            }\r\n            else {\r\n                console.error(error_obj);\r\n            }\r\n        };\r\n\r\n        private get = function () {\r\n            var error_obj = {\r\n                _type: this._type,\r\n                _message: this._message\r\n            } as IError;\r\n\r\n            switch (this._type) {\r\n                case Errors.UndefinedCon:\r\n                    error_obj._message = \"jsstore connection is not defined\";\r\n                    break;\r\n                case Errors.JsStoreUndefined:\r\n                    error_obj._message = \"jsstore is not defined\";\r\n                    break;\r\n                default:\r\n                    error_obj._message = 'the error type is not defined';\r\n                    break;\r\n            }\r\n            return error_obj;\r\n        };\r\n    }\r\n}","namespace SqlJs {\r\n    export class Query {\r\n        _stringQry: string;\r\n        _maps: IMap[] = [];\r\n        _api: string;\r\n        _splittedQry: string[];\r\n        constructor(qry: string) {\r\n            this._stringQry = qry.toLowerCase();\r\n            this._splittedQry = this.getWords();\r\n            this._api = this._splittedQry[0];\r\n        }\r\n\r\n        getMapValue = function (key) {\r\n            if (key.indexOf(\"@\") >= 0) {\r\n                var is_value_exist = false;\r\n                for (var i = 0, length = this._maps.length; i < length; i++) {\r\n                    if (this._maps[i]._key === key) {\r\n                        is_value_exist = true;\r\n                        return this._maps[i]._value;\r\n                    }\r\n                }\r\n                if (is_value_exist === false) {\r\n                    console.error('key does not have any value');\r\n                }\r\n            }\r\n            else {\r\n                return key;\r\n            }\r\n        };\r\n\r\n        getWords = function () {\r\n            return this._stringQry.replace(/  +/g, ' ').replace(\"=\", \" \").split(\" \");\r\n        };\r\n\r\n        map = function (key, value) {\r\n            this._maps.push(new Model.Map(key, value));\r\n        };\r\n    }\r\n}","namespace SqlJs {\r\n    export class Insert {\r\n        query: Query;\r\n        index_for_loop: number = 0;\r\n        constructor(qry: Query) {\r\n            this.query = qry;\r\n        }\r\n\r\n        getQuery = function () {\r\n            var query: object = {};\r\n            const keywords = ['into', 'values', 'skipdatacheck'];\r\n            const keywords_value = [\r\n                { value: 'Into', rules: 'next' },\r\n                { value: 'Values', rules: 'next' },\r\n                { value: 'SkipDataCheck', rules: '' }];\r\n            for (var i = this.index_for_loop, length = this.query._splittedQry.length; i < length;) {\r\n                var index_of_keywords = keywords.indexOf(this.query._splittedQry[i]);\r\n                if (index_of_keywords >= 0) {\r\n                    this.index_for_loop = i;\r\n                    query[keywords_value[index_of_keywords].value] =\r\n                        this.getValue(keywords_value[index_of_keywords].rules);\r\n                    i = this.index_for_loop;\r\n                }\r\n                i++;\r\n            }\r\n            return query;\r\n        };\r\n\r\n        getValue = function (rule) {\r\n            switch (rule) {\r\n                case 'next':\r\n                    return (this.query.getMapValue(this.query._splittedQry[++this.index_for_loop]));\r\n                // return value.indexof('@') === 0 ? this.query.getValue() : value;\r\n                default:\r\n            }\r\n        };\r\n    }\r\n}","namespace SqlJs {\r\n    export class Select {\r\n        constructor(msg: string) {\r\n            // ss\r\n        }\r\n    }\r\n}","namespace SqlJs {\r\n    export class Instance {\r\n        _connection: JsStore.Instance;\r\n        _query: Query;\r\n        constructor(jsstoreCon: JsStore.Instance) {\r\n            if (typeof JsStore === \"undefined\") {\r\n                new Error(Errors.JsStoreUndefined).throw();\r\n            }\r\n            else {\r\n                if (jsstoreCon) {\r\n                    this._connection = jsstoreCon;\r\n                }\r\n                else {\r\n                    new Error(Errors.UndefinedCon).throw();\r\n                }\r\n            }\r\n        }\r\n\r\n        run = function (qry: Query, onSuccess: () => any, onError: () => IError) {\r\n            this._query = qry;\r\n            qry = undefined;\r\n            var jsstore_query;\r\n            switch (this._query._api) {\r\n                case 'insert':\r\n                    jsstore_query = new Insert(this._query).getQuery();\r\n                    break;\r\n\r\n            }\r\n            console.log(jsstore_query);\r\n            // this._connection[this._api](jsstore_query, onSuccess, onError);\r\n        };\r\n    }\r\n}","namespace SqlJs {\r\n    export interface IMap {\r\n        _key: string;\r\n        _value: any;\r\n    }\r\n\r\n    export namespace Model {\r\n        export class Map implements IMap {\r\n            _key: string;\r\n            _value: any;\r\n            constructor(key, value) {\r\n                this._key = key;\r\n                this._value = value;\r\n            }\r\n        }\r\n    }\r\n}"]}